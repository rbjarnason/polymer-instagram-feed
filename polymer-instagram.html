<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">

<link rel="import" href="../../bower_components/iron-jsonp-library/iron-jsonp-library.html">
<script type="text/javascript" src="../../bower_components/instafeed.js/instafeed.min.js"></script>

<dom-module id='polymer-instagram'>
  <template>
    <style is="custom-style">
    </style>

    <div class="layout">
      <div id="instafeed" class="layout vertical center-center instafeed"></div>
    </div>
  </template>

  <script>
    Polymer({

      is: 'polymer-instagram',

      properties: {

        accessToken: {
          type: String,
          value: null
        },

        clientId: {
          type: String,
          value: null,
          observer: '_clientIdChanged'
        }
      },

      _clientIdChanged: function (newValue) {
        if (newValue) {
          var template = '<a href="{{link}}"><img height="{{height}}" width="{{width}}" src="{{image}}" /></a>';
          template += '<div class="layout vertical"><div>{{caption}}</div><div>{{location}}</div></div>';
          this.async(function () {
            var feed = new Instafeed({
              get: 'user',
              userId: '3066250812',
              clientId: this.clientId,
              accessToken: this.accessToken,
              resolution: 'standard_resolution',
              links: true
            });
            feed.run();
          }.bind(this), 50);
        }
      },

      ready: function () {
      }
    });
  </script>
</dom-module>
